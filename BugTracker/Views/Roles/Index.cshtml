@model IEnumerable<IdentityRole>

<h1 class="mt-3">Manage Roles</h1>
<a asp-action="Edit" class="btn btn-warning my-3">Create a Role</a>

<table class="table  overflow-hidden    table-sm table-hover table-bordered">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Users</th>
        <th>Update</th>
        <th>Delete</th>
    </tr>
    @foreach (var role in Model)
    {
        <tr>
            <td>@role.Id</td>
            <td>@role.Name</td>
            <td i-role="@role.Id"></td>
            <td><a class="btn btn-sm btn-primary" asp-action="Edit" asp-route-id="@role.Id">Update</a></td>
            <td>
                <button roleId=@role.Id class="btn btn-sm btn-danger js-delete">
                    Delete
                </button>
            </td>
        </tr>
    }
</table>

@section scripts{
<script>
    $(document).ready(function(){
        $('table').on("click",".js-delete", function(){
            let button = $(this)
            if (confirm("Are you sure you want to delete this role? This action cannot be undone.")){
                $.ajax({
                    url: "/roles/delete/" + button.attr("roleId"),
                    method: "POST",
                    success: () =>{
                        button.parent().parent().hide()
                    }
                })
            }


        })

    })

</script>

}